@ECHO off  // 명령 프롬프트에서 명령어를 실행할 때 명령어 자체를 출력하지 않도록 설정
GOTO start  // start 레이블로 이동

:find_dp0  // find_dp0 레이블
SET dp0=%~dp0  // 현재 스크립트의 디렉토리를 dp0 변수에 저장
EXIT /b  // 배치 스크립트 종료, 호출된 위치로 돌아감

:start  // start 레이블
SETLOCAL  // 환경 변수의 로컬 복사본을 만듦
CALL :find_dp0  // find_dp0 레이블을 호출

IF EXIST "%dp0%\node.exe" (  // dp0 디렉토리에 node.exe 파일이 있는지 확인
  SET "_prog=%dp0%\node.exe"  // node.exe 파일이 있으면 _prog 변수에 해당 경로를 설정
) ELSE (  // node.exe 파일이 없으면
  SET "_prog=node"  // _prog 변수를 node로 설정
  SET PATHEXT=%PATHEXT:;.JS;=;%  // PATHEXT 환경 변수에서 .JS 확장자를 제거
)

endLocal & goto #_undefined_# 2>NUL || title %COMSPEC% & "%_prog%"  "%dp0%\..\js-beautify\js\bin\html-beautify.js" %*  // endLocal 명령어를 실행하고, #_undefined_# 레이블로 이동 시도. 실패하면 명령 프롬프트 제목 설정 후 _prog 실행
